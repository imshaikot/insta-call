{"version":3,"sources":["../node_modules/peerjs/dist sync","components/Button.js","components/Flexbox.js","components/Input.js","components/Video.js","cards/Home.js","cards/Share.js","cards/Download.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Button","styled","button","size","onClick","children","div","centered","input","VideoBig","video","VideoInner","DisconnectButtonContainer","Container","refMain","refPeer","onLoadedMetadataMain","onLoadedMetadataPeer","onPressDisconnect","ref","onLoadedMetadata","autoPlay","muted","toShare","toDownload","peer","Peer","videoEl","useRef","friendsMediaEl","useState","connected","setConnect","friendId","setFriendId","onInputUpdate","useCallback","target","value","startCall","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","audio","stream","current","srcObject","call","on","remoteStream","err","console","log","window","location","reload","Flexbox","Video","disconnect","Input","placeholder","type","onChange","myId","setMyId","ringing","setRinging","answered","setAnswer","audioEl","myMediaEl","friendMediaEl","callRef","play","answerCall","answer","src","App","page","setPage","Share","Download","Home","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59635244.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 25;","import React from \"react\"\nimport styled from \"styled-components\"\n\nconst getSizeFont = ({  size }) => {\n    switch (size) {\n        case 'sm': \n        return '12px'\n        case 'md':\n            return '15px'\n        default:\n            return '20px'\n    }\n}\n\nconst getWidth = ({  size }) => {\n    switch (size) {\n        case 'sm': \n        return '100px'\n        case 'md':\n            return '125px'\n        default:\n            return '40%'\n    }\n}\nconst getHeight = ({  size }) => {\n    switch (size) {\n        case 'sm': \n        return '30px'\n        case 'md':\n            return '45px'\n        default:\n            return '60px'\n    }\n}\n\nconst Button = styled.button`\n    border: 1px solid #eee;\n    background-color: transparent;\n    font-size: ${getSizeFont};\n    width: ${ getWidth };\n    height: ${ getHeight };\n    outline: none;\n    margin: 10px;\n    cursor: pointer;\n    transition: background-color 250ms;\n    &:hover {\n        background-color: rgba(0, 0, 0, .1);\n    }\n`\n\nexport default ({ onClick, size, children }) => (\n    <Button onClick={onClick} size={size} >\n        {children}\n    </Button>\n)","import styled from \"styled-components\"\n\nexport default styled.div`\n    display: flex;\n    padding: 10px;\n    ${({ centered }) => {\n        if (centered) {\n            return `\n                justify-content: center;\n                align-items: center;\n                flex-direction: column;\n                height: 100vh;\n            `\n        }\n    }}\n`","import styled from \"styled-components\"\n\nexport default styled.input`\n    outline: none;\n    height: 80px;\n    width: 40%;\n    padding-left: 30px;\n    padding-right: 30px;\n    font-size: 30px;\n    color: gray;\n    border: 1px solid #eee;\n    background-color: rgba(0, 0, 0, 0.03);\n    transition: background-color 250ms;\n    &:focus {\n        background-color: transparent;\n    }\n`","import React from \"react\"\nimport styled from \"styled-components\"\nimport { Button } from \".\";\n\nconst VideoBig = styled.video`\n    background-color: #000;\n    width: 100%;\n    height: 100%;\n`\nconst VideoInner = styled.video`\n    position: absolute;\n    background-color: #000;\n    height: 144px;\n    width: 180px;\n    bottom: 50px;\n    right: 50px;\n    border: 1px solid #fff;\n`\nconst DisconnectButtonContainer = styled.div`\n    background-color: red;\n    color: #fff;\n    position: absolute;\n    bottom: 20px;\n    left: 250px;\n    margin: 0;\n    padding: 0;\n`\n\nconst Container = styled.div`\n    position: relative;\n    height: 480px;\n    width: 640px;\n`\n\nexport default ({ \n    refMain, \n    refPeer, \n    onLoadedMetadataMain, \n    onLoadedMetadataPeer,\n    onPressDisconnect\n}) => {\n    return (\n        <Container>\n            <VideoBig ref={refMain} onLoadedMetadata={onLoadedMetadataMain} autoPlay />\n            <VideoInner muted ref={refPeer} onLoadedMetadata={onLoadedMetadataPeer} autoPlay />\n            <DisconnectButtonContainer>\n                <Button size=\"sm\" onClick={onPressDisconnect}>Disconnect</Button>\n            </DisconnectButtonContainer>\n        </Container>\n    )\n}","import React from \"react\"\nimport styled from \"styled-components\"\nimport { Button } from \"../components\"\n\nconst Container = styled.div`\n    height: 100vh;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n`\n\nexport default ({ toShare, toDownload }) => (\n    <Container>\n        <Button size=\"lg\" onClick={toShare}>Join a call</Button>\n        <Button size=\"lg\" onClick={toDownload}>Start a call</Button>\n    </Container>\n)","import React, { useRef, useCallback, useState } from \"react\"\nimport Peer from \"peerjs\"\n\nimport { Flexbox, Input, Button, Video } from \"../components\"\n\n\nexport default () => {\n\n    const peer = new Peer()\n    const videoEl = useRef(null)\n    const friendsMediaEl = useRef(null)\n    const [ connected, setConnect ] = useState(false)\n    const [ friendId, setFriendId ] = useState('')\n    \n\n    const onInputUpdate = useCallback(({ target }) => {\n        setFriendId(target.value)\n    }, [friendId])\n\n    const startCall = useCallback(() => {\n        setConnect(true)\n        const getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        getUserMedia({video: true, audio: true}, function(stream) {\n            const video = videoEl.current\n            friendsMediaEl.current.srcObject = stream\n            const call = peer.call(friendId, stream)\n            call.on(\"stream\", (remoteStream) => {\n                video.srcObject = remoteStream\n            })\n        }, function(err) {\n        console.log('Failed to get local stream' ,err)\n        })\n    }, [friendId, peer])\n\n    const onDisconnectPress = () => {\n        peer.disconnect()\n    }\n\n    peer.on('disconnected', () => {\n        setConnect(false)\n        window.location.reload()\n    })\n\n    return (\n        <Flexbox centered={ true } >\n            { connected ? ( \n            <Video\n            refMain={videoEl} \n            refPeer={friendsMediaEl}\n            onPressDisconnect={onDisconnectPress}\n            /> ) : (\n                <>\n                    <h2>Connect to a friend</h2>\n                    <Input placeholder=\"Put your friends id...\" type=\"text\" onChange={onInputUpdate} value={friendId} />\n                    <Button onClick={startCall}>Connect</Button>\n                </>\n            )}\n        </Flexbox>\n    )\n}","import React, { useEffect, useState, useRef, useCallback } from \"react\"\nimport { Flexbox, Button, Video } from \"../components\"\nimport Peer from \"peerjs\"\n\nconst getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia\n\nexport default () => {\n    let call\n    const [ myId, setMyId ] = useState('')\n    const [ ringing, setRinging ] = useState(false)\n    const [ answered, setAnswer ] = useState(false)\n    const audioEl = useRef(null)\n    const myMediaEl = useRef(null)\n    const friendMediaEl = useRef(null)\n\n    const peer = new Peer()\n\n    peer.on('open', (id) => {\n        if (!myId) setMyId(id)\n    })\n    \n    peer.on('call', (callRef) => {\n        setRinging(true)\n        audioEl.current.play()\n        call = callRef\n      })\n    \n    peer.on('disconnected', () => {\n        setAnswer(false)\n        setRinging(false)\n        window.location.reload()\n    })\n\n    const answerCall = useCallback(() => {\n        setRinging(false)\n        setAnswer(true)\n        getUserMedia({video: true, audio: true}, function(stream) {\n        call.answer(stream)\n        call.on('stream', function(remoteStream) {\n            console.log(stream)\n            myMediaEl.current.srcObject = remoteStream\n            friendMediaEl.current.srcObject = stream\n        })\n        }, function(err) {\n        console.log('Failed to get local stream' ,err);\n        })\n    }, [call])\n    \n    return (\n        <Flexbox centered={ true }>\n            { answered ? (\n                <Video refMain={myMediaEl} refPeer={friendMediaEl} onPressDisconnect={peer.disconnect} />\n            ) : (\n                ringing ? (\n                    <h1>\n                        Ringing...\n                        <audio ref={audioEl}>\n                            <source  src=\"godfather_guitar.mp3\" />\n                        </audio>\n                        <Button onClick={answerCall}>Answer</Button>\n                    </h1>\n                ) : (\n                    <>\n                        <p>Waiting for someone to call you...</p>\n                        <p>Meanwhile you may share your ID with them to call you:</p>\n                        <b>{myId}</b>\n                    </>\n                )\n            )}\n        </Flexbox>\n    )\n}","import React, { useState } from 'react';\nimport { Home, Share, Download } from \"./cards\"\n\nfunction App() {\n  const [ page, setPage ] = useState(0)\n  const toDownloadState = () => setPage(1)\n  const toShareState = () => setPage(2)\n  switch (page) {\n    case 1:\n      return <Share />\n    case 2:\n      return <Download />\n    default:\n        return <Home toShare={toShareState} toDownload={toDownloadState} />\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}