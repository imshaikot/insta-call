(this["webpackJsonpinsta-call"]=this["webpackJsonpinsta-call"]||[]).push([[0],{14:function(e,n,t){e.exports=t(26)},19:function(e,n,t){},25:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=25},26:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(9),c=t.n(o),i=(t(19),t(3)),u=t(1),l=t(2);function s(){var e=Object(u.a)(["\n    border: 1px solid #eee;\n    background-color: transparent;\n    font-size: ",";\n    width: ",";\n    height: ",";\n    outline: none;\n    margin: 10px;\n    cursor: pointer;\n    transition: background-color 250ms;\n    &:hover {\n        background-color: rgba(0, 0, 0, .1);\n    }\n"]);return s=function(){return e},e}var d=l.a.button(s(),(function(e){switch(e.size){case"sm":return"12px";case"md":return"15px";default:return"20px"}}),(function(e){switch(e.size){case"sm":return"100px";case"md":return"125px";default:return"40%"}}),(function(e){switch(e.size){case"sm":return"30px";case"md":return"45px";default:return"60px"}})),f=function(e){var n=e.onClick,t=e.size,r=e.children;return a.a.createElement(d,{onClick:n,size:t},r)};function m(){var e=Object(u.a)(["\n    display: flex;\n    padding: 10px;\n    ","\n"]);return m=function(){return e},e}var b=l.a.div(m(),(function(e){if(e.centered)return"\n                justify-content: center;\n                align-items: center;\n                flex-direction: column;\n                height: 100vh;\n            "}));function g(){var e=Object(u.a)(["\n    outline: none;\n    height: 80px;\n    width: 40%;\n    padding-left: 30px;\n    padding-right: 30px;\n    font-size: 30px;\n    color: gray;\n    border: 1px solid #eee;\n    background-color: rgba(0, 0, 0, 0.03);\n    transition: background-color 250ms;\n    &:focus {\n        background-color: transparent;\n    }\n"]);return g=function(){return e},e}var p=l.a.input(g());function v(){var e=Object(u.a)(["\n    position: relative;\n    height: 480px;\n    width: 640px;\n"]);return v=function(){return e},e}function h(){var e=Object(u.a)(["\n    background-color: red;\n    color: #fff;\n    position: absolute;\n    bottom: 20px;\n    left: 250px;\n    margin: 0;\n    padding: 0;\n"]);return h=function(){return e},e}function O(){var e=Object(u.a)(["\n    position: absolute;\n    background-color: #000;\n    height: 144px;\n    width: 180px;\n    bottom: 50px;\n    right: 50px;\n    border: 1px solid #fff;\n"]);return O=function(){return e},e}function j(){var e=Object(u.a)(["\n    background-color: #000;\n    width: 100%;\n    height: 100%;\n"]);return j=function(){return e},e}var x=l.a.video(j()),E=l.a.video(O()),w=l.a.div(h()),k=l.a.div(v()),y=function(e){var n=e.refMain,t=e.refPeer,r=e.onLoadedMetadataMain,o=e.onLoadedMetadataPeer,c=e.onPressDisconnect;return a.a.createElement(k,null,a.a.createElement(x,{ref:n,onLoadedMetadata:r,autoPlay:!0}),a.a.createElement(E,{muted:!0,ref:t,onLoadedMetadata:o,autoPlay:!0}),a.a.createElement(w,null,a.a.createElement(f,{size:"sm",onClick:c},"Disconnect")))};function M(){var e=Object(u.a)(["\n    height: 100vh;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n"]);return M=function(){return e},e}var C=l.a.div(M()),z=function(e){var n=e.toShare,t=e.toDownload;return a.a.createElement(C,null,a.a.createElement(f,{size:"lg",onClick:n},"Join a call"),a.a.createElement(f,{size:"lg",onClick:t},"Start a call"))},P=t(4),D=t.n(P),S=function(){var e=new D.a,n=Object(r.useRef)(null),t=Object(r.useRef)(null),o=Object(r.useState)(!1),c=Object(i.a)(o,2),u=c[0],l=c[1],s=Object(r.useState)(""),d=Object(i.a)(s,2),m=d[0],g=d[1],v=Object(r.useCallback)((function(e){var n=e.target;g(n.value)}),[m]),h=Object(r.useCallback)((function(){l(!0),(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)({video:!0,audio:!0},(function(r){var a=n.current;t.current.srcObject=r,e.call(m,r).on("stream",(function(e){a.srcObject=e}))}),(function(e){console.log("Failed to get local stream",e)}))}),[m,e]);return e.on("disconnected",(function(){l(!1),window.location.reload()})),a.a.createElement(b,{centered:!0},u?a.a.createElement(y,{refMain:n,refPeer:t,onPressDisconnect:function(){e.disconnect()}}):a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Connect to a friend"),a.a.createElement(p,{placeholder:"Put your friends id...",type:"text",onChange:v,value:m}),a.a.createElement(f,{onClick:h},"Connect")))},U=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,R=function(){var e,n=Object(r.useState)(""),t=Object(i.a)(n,2),o=t[0],c=t[1],u=Object(r.useState)(!1),l=Object(i.a)(u,2),s=l[0],d=l[1],m=Object(r.useState)(!1),g=Object(i.a)(m,2),p=g[0],v=g[1],h=Object(r.useRef)(null),O=Object(r.useRef)(null),j=Object(r.useRef)(null),x=new D.a;x.on("open",(function(e){o||c(e)})),x.on("call",(function(n){d(!0),h.current.play(),e=n})),x.on("disconnected",(function(){v(!1),d(!1),window.location.reload()}));var E=Object(r.useCallback)((function(){d(!1),v(!0),U({video:!0,audio:!0},(function(n){e.answer(n),e.on("stream",(function(e){console.log(n),O.current.srcObject=e,j.current.srcObject=n}))}),(function(e){console.log("Failed to get local stream",e)}))}),[e]);return a.a.createElement(b,{centered:!0},p?a.a.createElement(y,{refMain:O,refPeer:j,onPressDisconnect:x.disconnect}):s?a.a.createElement("h1",null,"Ringing...",a.a.createElement("audio",{ref:h},a.a.createElement("source",{src:"godfather_guitar.mp3"})),a.a.createElement(f,{onClick:E},"Answer")):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Waiting for someone to call you..."),a.a.createElement("p",null,"Meanwhile you may share your ID with them to call you:"),a.a.createElement("b",null,o)))};var F=function(){var e=Object(r.useState)(0),n=Object(i.a)(e,2),t=n[0],o=n[1];switch(t){case 1:return a.a.createElement(S,null);case 2:return a.a.createElement(R,null);default:return a.a.createElement(z,{toShare:function(){return o(2)},toDownload:function(){return o(1)}})}};c.a.render(a.a.createElement(F,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.59635244.chunk.js.map